{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\shind\\\\OneDrive\\\\Desktop\\\\coding project\\\\blog post\\\\blog_front\\\\src\\\\Pages\\\\OpenBlog.js\",\n  _s = $RefreshSig$();\nimport { useLocation } from 'react-router-dom';\nimport { useState, useEffect } from 'react';\nimport CommentsSection from '../Components/CommentsSection';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction OpenBlog(props) {\n  _s();\n  const Data = useLocation().state; //get data about Post from App.js\n  const isViewerAuthor = Data.CurrUser == Data.Username; //isViewerAuthor is true if Data.CurrUser = Data.Username, AKA the viewer is the author of the post\n  const [isCommentsOpen, setCommentsOpenState] = useState(false); //comments are not open from the beginning by default\n  const [Comments, setCommentsState] = useState(null);\n  const PostID = Data.PostID;\n  const [LikesCount, setLikesCount] = useState(0);\n  const [isLiked, setLikedState] = useState(false);\n\n  //only runs once on mount\n  useEffect(() => {\n    GetLikesCount();\n    GetLikeState();\n  }, []);\n\n  //function called to delete the post\n  async function DeletePost() {\n    //send a POST request to /deleteblog with PostID in its body\n    await fetch('http://localhost:3001/deleteblog', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        PostID: PostID\n      })\n    });\n    props.Login(Data.Username, Data.DisplayName); //go back to the HomePage still logged in as the user\n  }\n\n  function getComments() {\n    //send a GET request to /getcomments with PostID as a parameter\n    fetch('http://localhost:3001/getcomments/' + PostID).then(res => res.json()).then(response => {\n      const Comments = response.res;\n      setCommentsOpenState(true); //set the isCommentsOpen State to true to show comments\n      setCommentsState(Comments); //update the information stored in the Comments State\n    });\n  }\n\n  function closeComments() {\n    setCommentsOpenState(false); //set the isCommentsOpen State to false to hide comments\n  }\n\n  //method to get the number of likes for the post\n  function GetLikesCount() {\n    //send a GET request to /getlikes with PostID as a parameter\n    fetch('http://localhost:3001/getlikes/' + PostID).then(res => res.json()).then(response => {\n      const LikesCount = response.res;\n      setLikesCount(LikesCount); //update the information stored in the LikesCount State\n    });\n  }\n\n  function Like(event) {\n    event.stopPropagation();\n    fetch('http://localhost:3001/addlike', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        PostID: PostID,\n        CurrUser: Data.CurrUser\n      })\n    }).then(res => res.json()).then(response => {\n      console.log(response); //continue from here lol\n      setLikedState(response.res);\n    });\n  }\n  function Unlike(event) {\n    event.stopPropagation();\n  }\n  function GetLikeState() {}\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\" \", /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: [\"Title: \", Data.Title]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 42\n    }, this), \"Author: \", Data.DisplayName, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 40\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 46\n    }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n      src: `data:image/jpeg;base64,${Data.Image}`,\n      alt: Data.ImageName\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 87\n    }, this), \" \", Data.PostText, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 29\n    }, this), \"Likes: \", LikesCount, \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 33\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: Like,\n      children: \"Like!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 45\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      onClick: Unlike,\n      children: \"Unlike!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }, this), \" \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 49\n    }, this), isViewerAuthor ? /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: DeletePost,\n      children: \"Delete Post\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 31\n    }, this) : null, \" \", isCommentsOpen ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(CommentsSection, {\n        Comments: Comments,\n        PostID: Data.PostID,\n        CurrUser: Data.CurrUser,\n        getComments: getComments\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), \" \", /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: closeComments,\n        children: \"Close Comments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), \" \"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: getComments,\n      children: \"See Comments\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this), \" \"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this);\n}\n_s(OpenBlog, \"C0jvaCa7RG/Nq+O10PLfraAOtVQ=\", false, function () {\n  return [useLocation];\n});\n_c = OpenBlog;\nexport default OpenBlog;\nvar _c;\n$RefreshReg$(_c, \"OpenBlog\");","map":{"version":3,"names":["useLocation","useState","useEffect","CommentsSection","OpenBlog","props","Data","state","isViewerAuthor","CurrUser","Username","isCommentsOpen","setCommentsOpenState","Comments","setCommentsState","PostID","LikesCount","setLikesCount","isLiked","setLikedState","GetLikesCount","GetLikeState","DeletePost","fetch","method","headers","body","JSON","stringify","Login","DisplayName","getComments","then","res","json","response","closeComments","Like","event","stopPropagation","console","log","Unlike","Title","Image","ImageName","PostText"],"sources":["C:/Users/shind/OneDrive/Desktop/coding project/blog post/blog_front/src/Pages/OpenBlog.js"],"sourcesContent":["import {useLocation} from 'react-router-dom';\r\nimport {useState, useEffect} from 'react';\r\nimport CommentsSection from '../Components/CommentsSection';\r\n\r\nfunction OpenBlog(props) {\r\n    const Data = useLocation().state; //get data about Post from App.js\r\n    const isViewerAuthor = (Data.CurrUser == Data.Username); //isViewerAuthor is true if Data.CurrUser = Data.Username, AKA the viewer is the author of the post\r\n    const [isCommentsOpen, setCommentsOpenState] = useState(false); //comments are not open from the beginning by default\r\n    const [Comments, setCommentsState] = useState(null);\r\n    const PostID = Data.PostID;\r\n    const [LikesCount, setLikesCount] = useState(0);\r\n    const [isLiked, setLikedState] = useState(false);\r\n\r\n    //only runs once on mount\r\n    useEffect(() => {\r\n        GetLikesCount();\r\n        GetLikeState();\r\n    }, [])\r\n\r\n    //function called to delete the post\r\n    async function DeletePost() {\r\n\r\n        //send a POST request to /deleteblog with PostID in its body\r\n        await fetch('http://localhost:3001/deleteblog', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({PostID: PostID})\r\n        })\r\n        \r\n        props.Login(Data.Username, Data.DisplayName); //go back to the HomePage still logged in as the user\r\n    }\r\n\r\n    function getComments() {\r\n\r\n        //send a GET request to /getcomments with PostID as a parameter\r\n        fetch('http://localhost:3001/getcomments/' + PostID).then(\r\n            res => res.json()\r\n        ).then(\r\n            response => {\r\n                const Comments = response.res\r\n                setCommentsOpenState(true) //set the isCommentsOpen State to true to show comments\r\n                setCommentsState(Comments) //update the information stored in the Comments State\r\n            }\r\n        )\r\n    }\r\n\r\n    function closeComments() {\r\n        setCommentsOpenState(false) //set the isCommentsOpen State to false to hide comments\r\n    }\r\n\r\n    //method to get the number of likes for the post\r\n    function GetLikesCount() {\r\n        //send a GET request to /getlikes with PostID as a parameter\r\n        fetch('http://localhost:3001/getlikes/' + PostID).then(\r\n            res => res.json()\r\n        ).then(\r\n            response => {\r\n                const LikesCount = response.res\r\n                setLikesCount(LikesCount) //update the information stored in the LikesCount State\r\n            }\r\n        )\r\n    }\r\n\r\n    function Like(event) {\r\n        event.stopPropagation()\r\n        fetch('http://localhost:3001/addlike', {\r\n            method: 'POST',\r\n            headers: {'Content-Type': 'application/json'},\r\n            body: JSON.stringify({PostID: PostID, CurrUser: Data.CurrUser})\r\n        }).then(\r\n            res => res.json()\r\n        ).then(\r\n            response => {\r\n                console.log(response)//continue from here lol\r\n                setLikedState(response.res)\r\n            }\r\n        )\r\n    }\r\n\r\n    function Unlike(event) {\r\n        event.stopPropagation()\r\n    }\r\n\r\n    function GetLikeState() {\r\n    }\r\n\r\n    return (\r\n        <div> {/* diplaying the blog post itself first */}\r\n            <h1>Title: {Data.Title}</h1> <br />\r\n            Author: {Data.DisplayName} <br /><br />\r\n            <img src={`data:image/jpeg;base64,${Data.Image}`} alt={Data.ImageName} /> <br /> {/* Display the image base64 image data as an image */}\r\n            {Data.PostText} <br />\r\n\r\n            {/* Displaying Post's Likes and buttons to like and unlike */}\r\n            Likes: {LikesCount} <br />\r\n            <div onClick={Like}>Like!</div> <br />\r\n            <div onClick={Unlike}>Unlike!</div> <br />\r\n\r\n            {isViewerAuthor ? <button onClick={DeletePost}>Delete Post</button> : null} {/* Only Displays if isViewerAuthor is true-if the viewer of the post is the author themselves, otherwise displays null. This button deletes the post */}\r\n\r\n            {/* Displays Button to open the Comments section if not already open, and a Button to close it if it already is open */}\r\n            {isCommentsOpen ? \r\n            <div>\r\n                <CommentsSection Comments={Comments} PostID={Data.PostID} CurrUser={Data.CurrUser} getComments={getComments} /> {/* Display the comments section */}\r\n                <button onClick={closeComments}>Close Comments</button> {/* Display the close button */}\r\n            </div> :\r\n            <button onClick={getComments}>See Comments</button>} {/* Display the open button */}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default OpenBlog;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}